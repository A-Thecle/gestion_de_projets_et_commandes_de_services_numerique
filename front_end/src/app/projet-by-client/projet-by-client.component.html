<div *ngIf="loading" class="loading">Chargement des projets...</div>

<div class="projets-container" *ngIf="!loading">
  <!-- Colonne 1 : Projets en attente -->
  <div class="projet-column">
    <h2 class="column-title">Vos projets en attente</h2>
    <div class="projets-cards">
      <div class="projet-card" *ngFor="let projet of projetsEnAttente">
        <div class="card-header">
          <a class="details-link" (click)="openDetails(projet)">Voir détails</a>
          <span class="statut">{{ projet.etat }}</span>
        </div>
        <div class="card-body">
          <p><strong>Titre :</strong> {{ projet.titre_projet }}</p>
          <p class="description"><strong>Description :</strong> {{ getFirstSentence(projet.description_projet) }}</p>
          <p *ngIf="projet.commande"><strong>Commande :</strong> {{ projet.commande.commandes_id }}</p>
          <p><strong>Date de livraison prévue :</strong> {{ projet.date_livraison_prevue | date:'dd/MM/yyyy' }}</p>
        </div>
      </div>
      <p *ngIf="projetsEnAttente.length === 0" class="no-projets">Aucun projet en attente.</p>
    </div>
  </div>

  <!-- Colonne 2 : Projets en cours -->
  <div class="projet-column">
    <h2 class="column-title">Vos projets en cours</h2>
    <div class="projets-cards">
      <div class="projet-card" *ngFor="let projet of projetsEnCours">
        <div class="card-header">
          <a class="details-link" (click)="openDetails(projet)">Voir détails</a>
          <span class="statut">{{ projet.etat }}</span>
        </div>
        <div class="card-body">
          <p><strong>Titre :</strong> {{ projet.titre_projet }}</p>
          <p class="description"><strong>Description :</strong> {{ getFirstSentence(projet.description_projet) }}</p>
          <p *ngIf="projet.commande"><strong>Commande :</strong> {{ projet.commande.commandes_id }}</p>
          <p><strong>Date de livraison prévue :</strong> {{ projet.date_livraison_prevue | date:'dd/MM/yyyy' }}</p>
        </div>
      </div>
      <p *ngIf="projetsEnCours.length === 0" class="no-projets">Aucun projet en cours.</p>
    </div>
  </div>

  <!-- Colonne 3 : Projets en révision -->
  <div class="projet-column">
    <h2 class="column-title">Vos projets en révision</h2>
    <div class="projets-cards">
      <div class="projet-card" *ngFor="let projet of projetsEnRevision">
        <div class="card-header">
          <a class="details-link" (click)="openDetails(projet)">Voir détails</a>
          <span class="statut">{{ projet.etat }}</span>
        </div>
        <div class="card-body">
          <p><strong>Titre :</strong> {{ projet.titre_projet }}</p>
          <p class="description"><strong>Description :</strong> {{ getFirstSentence(projet.description_projet) }}</p>
          <p *ngIf="projet.commande"><strong>Commande :</strong> {{ projet.commande.commandes_id }}</p>
          <p><strong>Date de livraison prévue :</strong> {{ projet.date_livraison_prevue | date:'dd/MM/yyyy' }}</p>
        </div>
      </div>
      <p *ngIf="projetsEnRevision.length === 0" class="no-projets">Aucun projet en révision.</p>
    </div>
  </div>

  <!-- Colonne 4 : Projets terminés -->
  <div class="projet-column">
    <h2 class="column-title">Vos projets terminés</h2>
    <div class="projets-cards">
      <div class="projet-card" *ngFor="let projet of projetsTermines">
        <div class="card-header">
          <a class="details-link" (click)="openDetails(projet)">Voir détails</a>
          <span class="statut">{{ projet.etat }}</span>
        </div>
        <div class="card-body">
          <p><strong>Titre :</strong> {{ projet.titre_projet }}</p>
          <p class="description"><strong>Description :</strong> {{ getFirstSentence(projet.description_projet) }}</p>
          <p *ngIf="projet.commande"><strong>Commande :</strong> {{ projet.commande.commandes_id }}</p>
          <p><strong>Date de livraison prévue :</strong> {{ projet.date_livraison_prevue | date:'dd/MM/yyyy' }}</p>
        </div>
      </div>
      <p *ngIf="projetsTermines.length === 0" class="no-projets">Aucun projet terminé.</p>
    </div>
  </div>
</div>